<!DOCTYPE html>
<html>
<head>
	<title>Walter Rumsby's Web Site</title>
	<link rel="stylesheet" href="/blog/styles/screen.css">
</head>
<body>
	<div id="header">
This is the header
</div>
	<div id="content"><p>This post is adapted from an answer on an internal Q &amp; A site at work. It&#39;s not &quot;new&quot; information, but it might be new to some people so I thought that it was worth reposting here. The code examples use YUI 2 because that&#39;s what I&#39;m most familiar with, but other JavaScript libraries provide similar features.</p>
<p>Let&#39;s start from &quot;the old way&quot; and progress to &quot;the new way&quot;.</p>
<p>If we start with:</p>
<pre><code>&lt;a href=&quot;#&quot; onclick=&quot;alert(&#39;I like frogs!&#39;)&quot;&gt;Frogs?&lt;/a&gt;</code></pre>
<p>this will, not surprisingly, alert the text &quot;I like frogs&quot;, but there&#39;s a simple problem here: the onclick handler does not cancel the default behaviour associated with clicking on the link, meaning that clicking on the link will navigate to the destination anchor. You might not notice this if the link is at or near the top of the page, but you&#39;ve had to scroll vertically to reach the link then clicking the link will scroll the page back to the top. Preventing this is simple:</p>
<pre><code>&lt;a href=&quot;#&quot; onclick=&quot;alert(&#39;I like frogs!&#39;); return false&quot;&gt;Frogs?&lt;/a&gt;</code></pre>
<p>return false cancels the default behaviour of the event.</p>
<p>This is all very well for simple cases, but if you want to perform a number of steps writing all of that in the onclick attribute can become unweildy. Again, there&#39;s a relatively simple solution, call a function from your onclick handler:</p>
<pre><code>`&lt;script&gt;
    var frogs = function() {
        alert(&#39;I like frogs&#39;);
        // do some other stuff too
    };
&lt;/script&gt;
&lt;a href=&quot;#&quot; onclick=&quot;frogs(); return false&quot;&gt;Frogs?&lt;/a&gt;`</code></pre>
<p>This is also nice because the function can be defined in a external script file, which:</p>
<pre><code>can be cached
should reduce the size of the HTML sent to the browser</code></pre>
<p>On the other hand the onclick attribute can only reference global objects and functions (without some trickery, which would make your onclick attribute unweildy) and global variables are bad.</p>
<p>Luckily we can set the onclick attribute in script, e.g.:</p>
<pre><code>&lt;a id=&quot;link&quot; href=&quot;#&quot;&gt;Frogs?&lt;/a&gt;
&lt;script&gt;
    window.onload = function() {
        // frogs is not visible outside of this function
        var frogs = function() {
            alert(&#39;I like frogs&#39;);
            // do some other stuff too
        };

        document.getElementById(&#39;link&#39;).onclick = function() {
            frogs();
            return false;
        };
    };
&lt;/script&gt;</code></pre>
<p>or:</p>
<p><a id="link" href="#">Frogs?</a></p>
<script>
    document.getElementById(&#39;link&#39;).onclick = function() {
        alert(&#39;I like frogs&#39;);
        // do some other stuff too
        return false;
    };
</script>

<p>Awesome, but we have another problem: there can only be a single value for an attribute, which means that setting onclick replaces any previous value of onclick. This problem is more obvious when when trying to work with events like the window object&#39;s onload event.</p>
<p>Fortunately the W3C defines the DOM Events Specification for attaching event listeners, meaning that you can attach multiple listeners for a single event on a given element.</p>
<p><a id="link" href="#">Frogs?</a></p>
<script>
    document.getElementById(&#39;link&#39;).addEventListener(&#39;click&#39;, function(e) {
        alert(&#39;I like frogs&#39;);
        // do some other stuff too
        e.preventDefault(); // instead of return false
    }, false);
</script>

<p>Unfortunately Internet Explorer does not implement the DOM Events Specification and offers a different syntax for adding event listeners. The scope in which the event handler runs in IE is also different. Quirks Mode has some more information on the differences between browsers.</p>
<p>Fortunately, JavaScript libraries come to the rescue, providing a normalised API that works across browsers and a host of other features.</p>
<p><script>
    YAHOO.util.Event.onDOMReady(function() {
        var Event = YAHOO.util.Event;</p>
<pre><code>    Event.on(&#39;link&#39;, &#39;click&#39;, function(e) {
        alert(&#39;I like frogs&#39;);
        // do some other stuff too
        Event.preventDefault(e);
    });

    Event.on(&#39;link&#39;, &#39;click&#39;, function(e) {
        alert(&#39;ME TOO!&#39;);
        Event.preventDefault(e);
    });
});</code></pre>
<p></script>
<a id="link" href="#">Frogs?</a></p>
<p>Things to note:</p>
<pre><code>the order of execution of event handlers is not guaranteed meaning that &quot;ME TOO!&quot; might be alerted before &quot;I like frogs&quot;
these examples are simply to demonstrate the concepts, you can do much more powerful and interesting things with a good event library; have a look at the documentation, including the examples</code></pre>
<p>YUI 2 provides a really robust Event Utility, YUI 3 provides an even more sophisticated system. This is really important because the only really good definition of how a web application differs from a web site that I have come across states:</p>
<pre><code>When it boils down to it, the main differentiator of a web application and a web site is that an app has much more interaction and is process-focused rather than content-driven.</code></pre>
<p>Custom Events mean that you&#39;re not limited to DOM Events either.</p>
<p>To me this all sounds quite a bit like enterprise integration: you have a powerful system for dealing with loosely-coupled components and that can form the basis for an interesting application framework.</p>
<p>Working with events is a fundamental part of writing contemporary web applications. JavaScript libraries provide very capable utilities to deal with events. Take advantage of those utilities and avoid the problems associated with other approaches.</p>
</div>
	<div id="comments">
<div id="disqus_thread"></div>

<script type="text/javascript" src="http://disqus.com/forums/walterrumsby/embed.js"></script>
<noscript>
	<a href="http://walterrumsby.disqus.com/?url=ref">View the discussion thread.</a>
</noscript>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</div>
	<div id="analytics">
<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
	var pageTracker = _gat._getTracker("UA-1803153-2");

	pageTracker._initData();
	pageTracker._trackPageview();
</script>
</div>
</body>
</html>